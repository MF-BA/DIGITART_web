{% extends 'base.html.twig' %}

{% block title %}{{ event.getEventName }}{% endblock %}

{% block body %}
    {{ include('@MercurySeriesFlashy/flashy.html.twig') }}

<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
    
</style>
<style>
.ha-text h2 {
    color: #726f6f !important;
    font-size: 40px;
    font-weight: 700;
    margin-bottom: 32px;
}
.bg-gradient{
    	background-image: -o-linear-gradient(330deg, #f80519 0%, #080808 100%), -o-linear-gradient(330deg, #9d25ee 0%, #f9488b 100%) !important;
	background-image: linear-gradient(120deg, #700000 0%, #b30202 100%), linear-gradient(120deg, #6d0404 0%, #000000 100%) !important;
}
.home-about-section {
	padding-bottom: 90px;
}
.ha-pic {
	-webkit-box-shadow: 0px 0px 30px rgba(11, 12, 48, 0.15);
	box-shadow: 0px 0px 30px rgba(11, 12, 48, 0.15);
	margin-right: 30px;
}

.ha-pic img {
	min-width: 100%;
	border-radius: 2px;
}
.home-about-section .col-md-4 img {
  width: 300px;
}

.ha-text {
	padding-top: 74px;
}
.color-event{
  color: #BD2A2E !important;
}
.color-event-text{
  color: #6a6b7c !important;
}
  .red-underline {
        text-decoration: underline;
        color: red;
    }
    .hero-section {
  background: url('/images/event_bg.jpg') no-repeat center center fixed;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
}.pricing-section {
  background: url('/images/event_bg_1.jpg') no-repeat center center;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
}
 .about-img {
  
  background-size: contain !important;
  background-repeat: no-repeat;
  background-position: center center;
}
.about .our-story h3 {
  font-size: 36px;
  font-weight: 700;
  margin-bottom: 20px;
  color: #BD2A2E !important;
}
.about .watch-video a {
    color: #6a6b7c  !important;
}
.popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #fff;
    border: 1px solid #ccc;
    padding: 10px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
.blog .comments .reply-form .btn-primary {
    border-radius: 4px;
    padding: 10px 20px;
    border: 0;
    background-color: #BD2A2E !important ;
}

</style>
     <script>
    var countDownDate = new Date("{{ event.getStartDate|date('M d,Y H:i:s') }}").getTime();
    var x=setInterval(function(){
     var now=new Date().getTime();
     var distance =countDownDate-now;
     
     var days = Math.floor(distance / (1000 * 60 * 60 * 24));
var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
var seconds = Math.floor((distance % (1000 * 60)) / 1000);

document.getElementById("days").innerHTML=days;
document.getElementById("hours").innerHTML=hours;
document.getElementById("seconds").innerHTML=seconds;
document.getElementById("minutes").innerHTML=minutes;

if(distance<0)
{
    clearInterval(x);
    document.getElementById("days").innerHTML="00";
    document.getElementById("hours").innerHTML="00";
    document.getElementById("seconds").innerHTML="00";
    document.getElementById("minutes").innerHTML="00";
}


    },1000)
</script>
    <!-- Counter Section End -->
  <link href="{{asset('Front/assets/css/style-event.css')}}" rel="stylesheet">

    <!-- Hero Section Begin -->
    <section class="hero-section set-bg">
        <div class="container">
            <div class="row">
                <div class="col-lg-7">
                    <div class="hero-text">
                       <span>The museum presents</span>

                        <h2>{{event.getEventName}}<br /> </h2>
                        
                    </div>
                </div>
               
            </div>
        </div>
    </section>
    <!-- Hero Section End -->
     <!-- Counter Section Begin -->
    <section class="counter-section bg-gradient special">
     
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <div class="counter-text">
                        <span>Event Date</span>
                        <h3>countdown <br />Until the Event</h3>
                    </div>
                </div>
                
                <div class="col-lg-8">
                    <div class="cd-timer" id="countdown">
                        <div class="cd-item">
                            <span id="days">00</span>
                            <p>Days</p>
                        </div>
                        <div class="cd-item">
                            <span id="hours">00</span>
                            <p>Hours</p>
                        </div>
                        <div class="cd-item">
                            <span id="minutes">00</span>
                            <p>Minutes</p>
                        </div>
                        <div class="cd-item">
                            <span id="seconds">00</span>
                            <p>Seconds</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
<section class="home-about-section spad">
<!-- ======= About Section ======= -->
    <section id="about" class="about">
      <div class="container" data-aos="fade-up">

        <div class="row position-relative">

          <div class="col-lg-7 about-img" style="background-image: url({{ asset('uploads/' ~ event.image) }});"></div>

          <div class="col-lg-7">
            <h2>Here are the event infos</h2>
            <div class="our-story">
              <h3>{{ event.getEventName }}</h3>
         <p>The infos you need :</p>      
                 <ul>
               <li><span class="icon_check"></span> <span class="color-event">Name : </span><span class="color-event-text"> {{ event.getEventName }}</span></li>
            <li><span class="icon_check"></span> <span class="color-event">Max number of participants : </span><span class="color-event-text"> {{ event.getNbParticipants }}</span></li>
            <li><span class="icon_check"></span> <span class="color-event">Start Time : </span><span class="color-event-text"> {{ event.getStartTime }}h</span></li>
             
              </ul>
              <p>{{ event.getDetail }}</p>

              <div class="watch-video d-flex align-items-center position-relative">
                <i class="bi bi-play-circle"></i>
                <a href="" class="glightbox stretched-link ">Watch Video</a>
                
                
              </div>
                   <a href="{{ path('PDF_Voyage') }}">
                 <button>Print all the events</button>
           </a>
           
           <a href="{{ path('app_event_participate', {'id': event.getId}) }}" class="glightbox stretched-link ">Participate</a>
            </div>
          </div>

        </div>
      </div>
    </section>
    <!-- End About Section -->
  <div class="container">

</section>
<!-- ======= Testimonials Section ======= -->
    <section id="testimonials" class="testimonials section-bg">
      <div class="container" data-aos="fade-up">

        <div class="section-header">
          <h2>Event Images</h2>
          <p>Here are some images of the event</p>
        </div>

        <div class="slides-2 swiper">
          <div class="swiper-wrapper">
           
    
  </div><!-- End testimonial item -->
  
    <!-- ======= Our Projects Section ======= -->
    <section id="projects" class="projects">
      <div class="container" data-aos="fade-up">

        <div class="portfolio-isotope" data-portfolio-filter="*" data-portfolio-layout="masonry" data-portfolio-sort="original-order">

          <div class="row gy-4 portfolio-container" data-aos="fade-up" data-aos-delay="200">
             {% for image in event.images %}      

            <div class="col-lg-4 col-md-6 portfolio-item filter-remodeling">
              <div class="portfolio-content h-100">
                <img src="{{ asset('/uploads/' ~ image.name) }}" class="img-fluid" alt="">
                <div class="portfolio-info">
                  <h4>Event Image</h4>
                  <p>Click Zoom for more details</p>
                  <a href="{{ asset('/uploads/' ~ image.name) }}" title="This is an image from the event last year" data-gallery="portfolio-gallery-remodeling" class="glightbox preview-link"><i class="bi bi-zoom-in"></i></a>
                  <a href="#" title="More Details" class="details-link"><i class="bi bi-link-45deg"></i></a>
                </div>
              </div>
            </div><!-- End Projects Item -->
       {% endfor %}

          </div><!-- End Projects Container -->

        </div>

      </div>
    </section><!-- End Our Projects Section -->
      

          </div>
          <div class="swiper-pagination"></div>
        </div>

      </div>
    </section><!-- End Testimonials Section -->
 <!-- Pricing Section Begin -->
    <section class="pricing-section set-bg spad" data-setbg="img/pricing-bg.jpg">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-title">
                        <h2>Ticket Pricing</h2>
                        <p>Entering the event is included when buying a normal ticket</p>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center">
                
                <div class="col-lg-4 col-md-8">
                    <div class="price-item top-rated">
                        <div class="tr-tag">
                            <i class="fa fa-star"></i>
                        </div>
                        <h4>Full Pass</h4>
                        <div class="pi-price">
                            <h2><span></span>Free</h2>
                        </div>
                     
                        <a href="{{ path('app_payment_new') }}" class="price-btn">Get Ticket <span class="arrow_right"></span></a>
                    </div>
                </div>
               
            </div>
        </div>
    </section>
    <!-- Pricing Section End -->
  <!-- ======= Blog Details Section ======= -->
    <section id="blog" class="blog">
      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row g-5">

          <div class="col-lg-8">

            <article class="blog-details">

              <div class="post-img">
                <img src="{{ asset('images/museum_event_1.jpg') }}" alt="" class="img-fluid">
              </div>

              <h2 class="title">Here are some additional informations to keep in mind</h2>

              <div class="meta-top">
                <ul>
                  <li class="d-flex align-items-center"><i class="bi bi-person"></i> <a href="blog-details.html">{{app.user.firstname}}</a></li>
                  <li class="d-flex align-items-center"><i class="bi bi-clock"></i> <a href="blog-details.html"><time datetime="2020-01-01">Jan 1, 2022</time></a></li>
          
                </ul>
              </div><!-- End meta top -->

              <div class="content">
                <p>
                     Please be aware that the museum has a policy that must be respected during your visit. This includes no touching of exhibits, no flash photography in certain areas, and following all museum rules and guidelines. We ask that you please be respectful of the museum property and other visitors, and report any suspicious or concerning behavior to museum staff. Thank you for helping to preserve these important exhibits for future generations.
                </p>

                <blockquote>
                  <p>
                   Please note that cameras are installed throughout the event, and breaking the rules may result in removal from the museum.      </p>
                </blockquote>

                <p>
               No Touching of Exhibits: Make sure to communicate that touching the exhibits is strictly prohibited. You might want to consider putting up signs around the exhibits to remind attendees.
                </p>


                <p>
                   No Flash Photography: Flash photography can cause damage to some exhibits. Make sure to communicate to attendees that flash photography is prohibited in certain areas or around certain exhibits.
                </p>

                 <p>
No Food or Drinks Near Exhibits: Food and drinks can cause damage to exhibits. Encourage attendees to consume food and drinks only in designated areas, away from the exhibits.                </p>

 <p>
Be Respectful: Encourage attendees to be respectful to the museum staff, other attendees, and the exhibits themselves.                </p>

 <p>
No Pets: Unless the museum allows service animals, it's best to encourage attendees to not bring pets to the event.
 <p>
Respect Restricted Areas: Some exhibits or areas may be off-limits to visitors. Encourage attendees to respect any restricted areas to avoid damage to exhibits or injury.                </p>


                <img src="{{ asset('images/museum_event.webp') }}" class="img-fluid" alt="">

                <h3>Enjoy the event !</h3>
                <p>
We want you to have an enjoyable experience at our event and to fully appreciate the exhibits on display. Please take your time to explore each exhibit, read the information provided, and immerse yourself in the stories and history behind them. Our knowledgeable staff members will be available to answer any questions you may have and to provide additional information about the exhibits. We hope you have a wonderful time at our event and create lasting memories.                </p>
               
              </div><!-- End post content -->
 <div class="comments">

              <h4 class="comments-count">{{ event.comments|length }} Comment{{ event.comments|length == 1 ? '' : 's' }}</h4>
{% for comment in event.comments %}
{% if comment.parent == null %}
              <div id="comment-1" class="comment">
                <div class="d-flex">
                  <div class="comment-img"><img src="{{asset('uploads/' ~ comment.getNickname().image())}}" alt=""></div>
                  <div>
                    <h5><a href="">{{comment.getNickname().firstname()}}</a>
                     <a href="#ajout-commentaire" data-reply data-id="{{comment.id}}" class="reply"><i class="bi bi-reply-fill"></i> Reply</a></h5>
                    <time datetime="2020-01-01">{{comment.createdAt|date("d/m/Y H:i") }}</time>
                    <p style="color: white;">
                      {{comment.content|raw}}
                    </p>
                  </div>
                </div>
                {% for reply in comment.replies %}
                 <div id="comment-reply-2" class="comment comment-reply">
                    <div class="d-flex">
                      <div class="comment-img"><img src="{{asset('uploads/' ~ comment.getNickname().image())}}" alt=""></div>
                      <div>
                       <h5><a href="">{{comment.getNickname().firstname()}}</a>
                        <time datetime="2020-01-01">{{reply.createdAt|date("d/m/Y H:i") }}</time>
                        <p>
                               {{reply.content|raw}}                        </p>
                      </div>
                    </div>

                  </div><!-- End comment reply #2-->
                  {% endfor %}
              </div><!-- End comment #1 -->
            
					{% endif %}
{% endfor %}

              <div class="reply-form">

                <h4>Leave a Reply</h4>
                <p>Your email address will not be published. Required fields are marked * </p>
                 <form action="" method="post" id="ajout-commentaire">
  {{ form_start(commentForm, {attr: {novalidate: 'novalidate','id': 'comment-form'}}) }}
  <div class="row">
    <div class="col form-group">
      {{ form_label(commentForm.content, 'Send Comment') }}
      {{ form_widget(commentForm.content, { 'attr': {'class': 'form-control', 'placeholder': 'Enter your comment'} }) }}
    </div>
  </div>
  {{ form_widget(commentForm) }}
  <button type="submit" class="btn btn-primary">Submit</button>
  {{ form_end(commentForm) }}
</form>


              </div>

            </div><!-- End blog comments -->
              <div class="meta-bottom">
                <i class="bi bi-folder"></i>
                <ul class="cats">
                  <li><a href="#">Events page</a></li>
                </ul>

                <i class="bi bi-tags"></i>
                <ul class="tags">
                  <li><a href="#">Creative</a></li>
                  <li><a href="#">Art</a></li>
                  <li><a href="#">Fun</a></li>
                </ul>
              </div><!-- End meta bottom -->

            </article><!-- End blog post -->

            

            

          </div>

          <div class="col-lg-4">

            <div class="sidebar">

              <div class="sidebar-item search-form">
                <h3 class="sidebar-title">Search</h3>
               <form method="GET" action="{{ path('event_search_name') }}">
    <div class="form-group">
       <input type="text" class="form-control" id="id" name="id" placeholder="Search by Event Name">
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
</form>
              </div><!-- End sidebar search formn-->


              <div class="sidebar-item recent-posts">


              </div><!-- End sidebar recent posts-->

              <div class="sidebar-item tags">
                <h3 class="sidebar-title">Tags</h3>
                <ul class="mt-3">
                  <li><a href="#">museumevent</a></li>
                  <li><a href="#">history</a></li>
                  <li><a href="#">exhibition</a></li>
                  <li><a href="#">art</a></li>
                  <li><a href="#">culture</a></li>
                  <li><a href="#">education</a></li>
                  <li><a href="#">entertainment</a></li>
                  <li><a href="#">familyfun</a></li>
                  <li><a href="#">thingstodo</a></li>
                  <li><a href="#">weekendactivities</a></li>

                </ul>
              </div><!-- End sidebar tags-->

            </div><!-- End Blog Sidebar -->

          </div>
        </div>

      </div>
    </section><!-- End Blog Details Section -->
  <script src="{{ asset('ckeditor5/ckeditor.js') }}"></script>
    <script src="{{ asset('js/ckeditor.js') }}"></script>
	<script>
		window.onload = () => {

			// On met un écouteur d'évènements sur tous les boutons répondre
			document.querySelectorAll("[data-reply]").forEach(element => {
				element.addEventListener("click", function(){
					document.querySelector("#comments_parentid").value = this.dataset.id;
				});
			});
		}
		let caroulix = new Caroulix('#carousel');
		let modal = new Modal('#modale-contact');
	</script>
   <script>
    $(function() {
      var commentForm = $('#comment-form');
      var commentList = $('#comment-list');

      // Submit the form asynchronously when the user submits it
      commentForm.submit(function(event) {
        event.preventDefault();

        var url = commentForm.attr('action');
        var data = commentForm.serialize();

        $.ajax({
          type: commentForm.attr('method'),
          url: url,
          data: data,
          success: function(response) {
            // Update the comment list with the new comment
            commentList.html(response.comments);
            commentForm.get(0).reset();
          },
          error: function(xhr, textStatus, errorThrown) {
            alert('An error occurred while submitting the comment.');
          }
        });
      });

      // Load the comments asynchronously when the page loads
      $.ajax({
        type: 'GET',
        url: '{{ path('app_event_show_front', {'id': event.id}) }}',
        success: function(response) {
          commentList.html(response.comments);
        },
        error: function(xhr, textStatus, errorThrown) {
          alert('An error occurred while loading the comments.');
        }
      });
    });
  </script>
{% endblock %}