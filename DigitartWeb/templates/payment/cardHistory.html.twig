{% extends 'base.html.twig' %}

{% block title %}Payment card{% endblock %}


  {% block navbar %}
        
          <!-- ======= Header ======= -->
  <header id="header" class="header d-flex align-items-center">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-between">

      <a href="" class="logo d-flex align-items-center">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <img src="{{asset('Front/assets/img/logo digitart.png')}}" alt=""> 
        
      </a>

      <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
      <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>

    </div>
  </header><!-- End Header -->
  
{% endblock %}

{% block body %}
    <!-- ======= Breadcrumbs ======= -->
    <div class="breadcrumbs d-flex align-items-center" style="background-image: url({{asset('Front/assets/img/front-home/museum4.jpg')}});">
      <div class="container position-relative d-flex flex-column align-items-center" data-aos="fade">

        <h2>Purchase History</h2>
        <ol>
          <li><a href="{{ path('app_payment_new') }}">Payment <a href="{{ path('app_payment_card') }}"> /My Card</a>/My Card History</li>
          
        </ol>

      </div>
    </div><!-- End Breadcrumbs -->


<!-- partial:index.partial.html -->
<link href="https://fonts.googleapis.com/css?family=Cabin|Indie+Flower|Inknut+Antiqua|Lora|Ravi+Prakash" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"  />

<section id="services" class="services section-bg">
  <div class="container" data-aos="fade-up">


  {% if payments is empty %}
  <h1 class="upcomming" data-aos="fade-up" data-aos-delay="200">No purchases were made!</h1>
  {% else %}
  <div class="watch-video d-flex align-items-center position-relative">
  <a href="{{ path('pdf') }}" class="glightbox stretched-link "><a  class="submit" data-aos="fade-up" data-aos-delay="200">Generate PDF</a></a>
  </div>
  
 

    <h1 class="upcomming" data-aos="fade-up" data-aos-delay="200">Tickets Bought</h1>
    {% for payment in payments %}
      <div class="item" data-aos="fade-up" data-aos-delay="200">
        <div class="item-right" >
          {% set day = payment.purchaseDate|date('d') %}
          {% set month = payment.purchaseDate|date('M')|lower %}
          <h2 class="num">{{ day }}</h2>
          <p class="day">{{ month }}</p>
          <span class="up-border"></span>
          <span class="down-border"></span>
        </div> <!-- end item-right -->
        
        <div class="item-left">
          <p class="event">Price: {{ payment.totalPayment }} $</p>
          <h2 class="title">Adult: {{ payment.nbAdult }}<br>Teen: {{ payment.nbTeenager }}<br>Student: {{ payment.nbStudent }}</h2>
          
          <div class="sce">
            <div class="icon">
              <i class="fa fa-table"></i>
            </div>
            <p>{{ payment.purchaseDate ? payment.purchaseDate|date('Y-m-d') : '' }} </p>
          </div>
          <div class="fix"></div>
          <div class="loc">
            <div class="icon">
              <i class="fa fa-map-marker"></i>
            </div>
            <p>Digitart</p>
          </div>
          <div class="fix"></div>
          </form>
        </div> <!-- end item-right -->
      </div> <!-- end item -->
    {% endfor %}

  {% endif %}
</div>
<!-- partial -->
   </div>
  
</section><!-- End Services Section --> 

<div class="bodyT">
  <input type="checkbox" id="toggle" checked>
  <label for="toggle">Open Overlay</label>
  <dialog>
    <p>  
      Thanks for your purchase! 
      An email will be sent to your email address. Check it! 
      Don't forget to bring your receipt with you.
    </p> 
    <label for="toggle">Close </label>
  </dialog>
</div>

<script>
  function togglePayments() {
    var payments = document.getElementById("payments");
    var toggleBtn = document.querySelector(".toggle-btn i");

    if (payments.style.display === "none") {
        payments.style.display = "block";
        toggleBtn.classList.remove("fa-arrow-down");
        toggleBtn.classList.add("fa-arrow-up");
    } else {
        payments.style.display = "none";
        toggleBtn.classList.remove("fa-arrow-up");
        toggleBtn.classList.add("fa-arrow-down");
    }
}

</script>
<style>
* {
  box-sizing: border-box;
  margin:0;
  padding:0;
}
  .container {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  
body {
  background:black;
  font-family: 'Inknut Antiqua', serif;
  font-family: 'Ravi Prakash', cursive;
  font-family: 'Lora', serif;
  font-family: 'Indie Flower', cursive;
  font-family: 'Cabin', sans-serif;
}



div.container {
  max-width: 1350px;
  margin: 0 auto;
  overflow: hidden
}
.upcomming {
  font-size: 45px;
  text-transform: uppercase;
  border-left: 14px solid rgba(255, 0, 0, 0.78);
  padding-left: 12px;
  margin: 18px 8px;
}
.upcomming2 {
  font-size: 45px;
  text-transform: uppercase;
  margin: 18px 8px;
}
.container .item {
  width: 48%;
  float: left;
  padding: 0 20px;
  background: #fff;
  overflow: hidden;
  margin: 10px
}
.container .item-right, .container .item-left {
  float: left;
  padding: 20px 
}
.container .item-right {
  padding: 79px 50px;
  margin-right: 20px;
  width: 25%;
  position: relative;
  height: 286px
}
.container .item-right .up-border, .container .item-right .down-border {
    padding: 14px 15px;
    background-color: #ddd;
    border-radius: 50%;
    position: absolute
}
.container .item-right .up-border {
  top: -8px;
  right: -35px;
}
.container .item-right .down-border {
  bottom: -13px;
  right: -35px;
}
.container .item-right .num {
  font-size: 60px;
  text-align: center;
  color: #111
}
.container .item-right .day, .container .item-left .event {
  color: #555;
  font-size: 24px;
  margin-bottom: 9px;
}
.container .item-right .day {
  text-align: center;
  font-size: 25px;
}
.container .item-left {
  width: 71%;
  padding: 20px 0px 19px 46px;
  border-left: 3px dotted #999;
} 
.container .item-left .title {
  color: #111;
  font-size: 20px;
  margin-bottom: 12px
}
.container .item-left .sce {
  margin-top: 5px;
  display: block
}
.container .item-left .sce .icon, .container .item-left .sce p,
.container .item-left .loc .icon, .container .item-left .loc p{
    float: left;
    word-spacing: 5px;
    letter-spacing: 1px;
    color: #888;
    margin-bottom: 10px;
}
.container .item-left .sce .icon, .container .item-left .loc .icon {
  margin-right: 10px;
  font-size: 20px;
  color: #666
}
.container .item-left .loc {display: block}
.fix {clear: both}
.container .tickets{
    color: #fff;
    padding: 6px 14px;
    float: right;
    margin-top: 10px;
    font-size: 18px;
    border: none;
    cursor: pointer
}
.container .submit{
    color: #fff;
    background: #BD2A2E;
    padding: 10px 20px;
    float: right;
    margin-top: 15px;
    font-size: 24px;
    border: none;
    cursor: pointer
}
.container .item .tickets {background: #BD2A2E}
.container .item .booked {background: #3D71E9}
.container .item .cancel {background: #DF5454}
.linethrough {text-decoration: line-through}
@media only screen and (max-width: 1150px) {
  .container .item {
    width: 100%;
    margin-right: 20px
  }
  div.container {
    margin: 0 20px auto
  }
}



.bodyT {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    padding: 0;
    width: 100%;
  }
  
  #toggle {
    display: none;
  }
  
  #toggle:checked + label + dialog {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: green;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    padding: 20px;
    box-sizing: border-box;
  }
  
  #toggle:checked + label + dialog p {
    font-size: 20px;
    color: #fff;
    text-align: center;
  }
  
  #toggle:checked + label + dialog label {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background-color: #fff;
    padding: 10px 20px;
    cursor: pointer;
  }
</style>
{% endblock %}